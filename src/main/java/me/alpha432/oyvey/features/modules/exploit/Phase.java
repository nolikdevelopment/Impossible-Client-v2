package me.alpha432.oyvey.features.modules.exploit;

import me.alpha432.oyvey.OyVey;
import me.alpha432.oyvey.features.commands.Command;
import me.alpha432.oyvey.features.modules.Module;
import me.alpha432.oyvey.util.InventoryUtil;
import net.minecraft.item.EnderPearlItem;
import net.minecraft.item.Items;
import net.minecraft.network.packet.c2s.play.PlayerInteractItemC2SPacket;
import net.minecraft.util.Formatting;
import net.minecraft.util.Hand;


public class Phase extends Module {
    public Phase() {
        super("Phase", "", Category.EXPLOIT, true, false, false);
    }

    @Override
    public void onTick() {
        if (nullCheck()) return;
        int oltslot = mc.player.getInventory().selectedSlot;
        int slot = InventoryUtil.findHotbarItem(EnderPearlItem.class);
        if (slot != -1) {
            InventoryUtil.switchSlot(slot);
            mc.player.networkHandler.sendPacket(new PlayerInteractItemC2SPacket(Hand.MAIN_HAND, 0, mc.player.getYaw(), 85));
            OyVey.rotationManager.rotate(mc.player.getYaw(), 85);
            mc.player.swingHand(Hand.MAIN_HAND);
            InventoryUtil.switchSlot(oltslot);
            disable();
        } else {
            String text = Formatting.DARK_RED + "[!] " + Formatting.WHITE + "У вас нету такого предмета, отключаю!";
            Command.sendMessage(text);
            mc.player.getInventory().count(Items.ENDER_PEARL);
            disable();
            }
        }
    }
